!function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){function i(e){return T.isNil(e)?A:e}function r(e){return T.isFunction(e)?e.apply(this,[].slice.call(arguments,1)):e}function o(e){var n=window.location,t=n.host,i=t+n.pathname;return/^host$/gi.test(e)?t:/^path$/gi.test(e)||T.isNil(e)?i:e}function s(e){if(E)return v;E=!0,T.apply(h,e);var n=x;return("WebSQL"==e.storeType||!e.storeType&&T.os.ios)&&(n=m),w=new n(function(){w.getAll(o(h.scope),h.version,function(e){e.forEach(function(e){N.set(e.selector,e.capture_id,e.htm)}),h.onReady&&h.onReady(v)})}),v}function c(e,n){n=n||{};var t,s;return t=T.isNil(n.id)?i(n.id):r(n.id,e),s=T.isNil(n.html)?T.html(e):r(n.html,e),N.set(e,t,s),w.add(e,t,s,o(h.scope),h.version,T.isNil(n.expires)?h.expires:n.expires),v}function a(e,n){n=n||{};var t,o;return t=T.isNil(n.id)?i(n.id):r(n.id,e),o=l(e,t),T.html(e,o),n.fallback&&T.isNil(o)&&n.fallback(),v}function u(e,n){n=n||{};var t=T.isArray(e)?e:[e];return t.forEach(function(e){I.watch(e,function(){c(e,{id:n.id,html:n.html})})}),v}function l(e,n){return N.get(e,n)}function d(e){return N.get(e)}function f(e,n){return N.del(e,n),w["delete"](e,n,o(h.scope),h.version),v}function p(e){return(T.isNil(e)||e==h.version)&&N.empty(),w.deleteAll(o(h.scope),e||h.version),v}var v,h,w,E,T=t(1),D=t(3),g=t(4),x=t(2),m=t(5),A="DEFAULT_CAPTURE_ID",N=new D,I=new g;h={storeType:null,scope:"path",version:1,expires:6048e5},v={capture:c,resume:a,watch:u,get:l,getAll:d,remove:f,clear:p},window.DOMSnap=s,e.exports=s},function(e,n){function t(e){return void 0==e||null==e||0==e}function i(e){return"function"==typeof e}function r(e){return"[object Array]"===toString.call(e)}function o(e,n,t){var r=i(n)?n.call(e):n;if(r){var o;for(o in r)e[o]=t?t(r[o]):r[o]}}function s(e){return document.querySelector(e)}function c(e,n){var i=s(e);return t(n)?i.innerHTML:i.innerHTML=n}var a=navigator.userAgent,u=a.match(/(Android);?[\s\/]+([\d.]+)?/),l=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!l&&a.match(/(iPhone\sOS)\s([\d_]+)/),p={};u&&(p.android=!0,p.version=u[2]),f&&!d&&(p.ios=p.iphone=!0,p.version=f[2].replace(/_/g,".")),l&&(p.ios=p.ipad=!0,p.version=l[2].replace(/_/g,".")),d&&(p.ios=p.ipod=!0,p.version=d[3]?d[3].replace(/_/g,"."):null),n.os=p,n.isNil=t,n.isFunction=i,n.isArray=r,n.apply=o,n.el=s,n.html=c},function(e,n,t){var i,r,o,s=t(1);i=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB,r=window.hasOwnProperty("webkitIndexedDB")?window.webkitIDBTransaction:window.IDBTransaction,o=window.hasOwnProperty("webkitIndexedDB")?window.webkitIDBKeyRange:window.IDBKeyRange,e.exports=function(e){function n(e){console.error("An error occurred",e)}function t(){o.objectStoreNames.contains(l)&&o.deleteObjectStore(l);var e=o.createObjectStore(l,{keyPath:"id",autoIncrement:!0});e.createIndex("id","id",{unique:!0}),e.createIndex("selector","selector",{unique:!1}),e.createIndex("capture_id","capture_id",{unique:!1}),e.createIndex("scope","scope",{unique:!1}),e.createIndex("version","version",{unique:!1})}var o,c=this,a="DOMSnap_DB",u=16,l="Snap",d=i.open(a,u);d.onsuccess=function(n){var i;o=n.target.result,u=String(u),o.setVersion&&u!==o.version?(i=o.setVersion(u),i.onsuccess=function(){t(),i.result.oncomplete=function(){e&&e(c)}}):e&&e(c)},d.onupgradeneeded=function(e){o=e.target.result,t()},d.onerror=n,this.add=function(e,t,i,c,a,u){!s.isNil(e)&&!s.isNil(t)&&this["delete"](e,t,c,a,function(){var s={selector:e,capture_id:t,htm:i,scope:c,version:a,expires:u||0,create_date:(new Date).getTime()};o.transaction([l],r.READ_WRITE||"readwrite").objectStore(l).add(s).onerror=n})},this["delete"]=function(e,n,t,i,s){o.transaction([l],r.READ_WRITE||"readwrite").objectStore(l).openCursor().onsuccess=function(r){var o,c=r.target.result;return c?(o=c.value,o.selector==e&&o.capture_id==n&&o.scope==t&&o.version==i&&c["delete"](),void c["continue"]()):void(s&&s())}},this.getAll=function(e,n,t){var i=[],c=(new Date).getTime();o.transaction([l],r.READ_WRITE||"readwrite").objectStore(l).openCursor().onsuccess=function(r){var o,a=r.target.result;return a?(o=a.value,o.scope==e&&o.version==n&&(s.isNil(o.expires)||c-o.create_date>o.expires?a["delete"]():i.push(o)),void a["continue"]()):void t(i)}},this.deleteAll=function(e,n){o.transaction([l],r.READ_WRITE||"readwrite").objectStore(l).openCursor().onsuccess=function(t){var i,r=t.target.result;r&&(i=r.value,i.scope==e&&i.version==n&&r["delete"](),r["continue"]())}}}},function(e,n,t){function i(){var e={};this.get=function(n,t){return e[n]?r.isNil(t)?e[n]:e[n][t]:null},this.set=function(n,t,i){r.isNil(n)||r.isNil(t)||r.isNil(i)||(e[n]=e[n]||{},e[n][t]=i)},this.del=function(n,t){e[n]&&(r.isNil(t)?(e[n]=null,delete e[n]):(e[n][t]=null,delete e[n][t]))},this.empty=function(){e={}}}var r=t(1);e.exports=i},function(e,n,t){function i(){function e(e,t){n(e),i[e]=t}function n(e){var n=i[e];n&&(n.disconnect(),i[e]=null,delete i[e])}function t(e,n){return new o(n).observe(r.el(e),{attributes:!0,childList:!0,characterData:!0,subtree:!0})}var i={};this.watch=function(n,i){e(n,t(n,i))},this.unwatch=function(e){n(e)}}var r=t(1),o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;e.exports=i},function(e,n,t){var i=t(1);e.exports=function(e){function n(){t("CREATE TABLE IF NOT EXISTS "+a+"(id INTEGER PRIMARY KEY ASC, create_date TIMESTAMP, selector TEXT, capture_id TEXT, scope TEXT, version INTEGER, expires INTEGER, htm TEXT)",[],!1,e)}function t(e,n,t,o,s){function c(e,n){var r,c,a=[];if(d-=1,!d){for(r=0,c=n.rows.length;c>r;r+=1){var u=n.rows.item(r);i.isFunction(s)?s(u)&&a.push(u):a.push(u)}o&&o(t?a[0]:a)}}function a(e,n){"undefined"!=typeof console&&console.log("WebSQL error: ",e,n)}var u,l,d;n[0]instanceof Array||(n=[n]),d=n.length,r.transaction(function(t){for(u=0,l=n.length;l>u;u+=1)t.executeSql(e,n[u],c,a)})}var r,o=this,s="DOMSnap_DB",c=19,a="Snap";try{r=openDatabase(s,"",s,5242880);var u=r.version;u!=c?r.changeVersion(u,c,function(){t("DROP TABLE "+a,[]),n()}):n()}catch(l){console.log("WebSQL error: ",l)}this.add=function(e,n,r,o,s,c){i.isNil(e)||i.isNil(n)||this["delete"](e,n,o,s,function(){t("INSERT INTO "+a+" (selector, capture_id, htm, scope, version, create_date, expires) VALUES (?, ?, ?, ?, ?, ?, ?);",[e+"",n+"",r+"",o+"",s,new Date,c||0],!1)})},this["delete"]=function(e,n,i,r,o){t("DELETE FROM "+a+" WHERE selector = ? AND capture_id = ? AND scope = ? AND version = ?",[e+"",n+"",i+"",r],!1,o)},this.deleteById=function(e){t("DELETE FROM "+a+" WHERE id = ?",[e],!1)},this.getAll=function(e,n,r){var s=(new Date).getTime();t("SELECT * FROM "+a+" WHERE scope = ? AND version = ?",[e,n],!1,r,function(e){return i.isNil(e.expires)||s-new Date(e.create_date).getTime()>e.expires?(o.deleteById(e.id),!1):!0})},this.deleteAll=function(e,n){t("DELETE FROM "+a+" WHERE scope = ? AND version = ?",[e,n])}}}]);